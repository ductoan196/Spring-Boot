<head>

    <title>Set New Password</title>


    <link rel="stylesheet" type="text/css" th:href="@{/assets/component/css/bootstrap-select.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/assets/component/css/line-awesome.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/assets/component/css/owl.carousel.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/assets/component/css/owl.theme.default.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/assets/component/css/jquery.fancybox.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/assets/component/css/daterangepicker.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/assets/component/css/animate.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/assets/component/css/animated-headline.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/assets/component/css/jquery-ui.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/assets/component/css/flag-icon.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/assets/component/css/hotel-list.css}">

    <style>
        .error-message {
            color: #e74c3c;
            font-size: 12px;
        }
    </style>

</head>

<body>
<main id="main-content">
    <div class="page-content">
        <section class="contact-area padding-top-100px padding-bottom-70px">

            <div class="container" style="margin-left: auto; margin-right: auto">
                <div class="row">
                    <div class="col-lg-7 mx-auto" style="width: 60%; margin-left: auto; margin-right: auto">

                        <div class="form-box">
                            <div style="display: flex; margin-top: 30px; margin-bottom: 20px; justify-content: center">
                                <img src="/assets/user/images/logo1.png" alt="image">
                            </div>
                            <div class="form-title-wrap">
                                <h3 class="title">Set New Password</h3>
                                <p class="font-size-15 pt-2">Enter the email of your account to reset password. Then you
                                    will receive a link to email to reset the password.If you have any issue about reset
                                    password
                                    <a href="contact.html" class="text-color">contact us</a>
                                </p>
                            </div>
                            <!-- form-title-wrap -->
                            <div class="form-content ">
                                <div class="contact-form-action">
                                    <form action="/api/v1/authentication/reset-password" method="post">
                                        <!-- Các trường dữ liệu của form ở đây, ví dụ: -->
                                        <div class="input-box">
                                            <label for="newPassword">New Password:</label> <br>
                                            <div class="form-group input-row">
                                                <span class="la la-lock form-icon"></span>
                                                <input type="password" id="newPassword" class="form-control"
                                                       name="newPassword" required>
                                                <br>
                                                <span class="error-message" id="newPasswordError"></span>
                                            </div>
                                            <br>
                                            <label for="confirmPassword">Confirm Password:</label> <br>
                                            <div class="form-group input-row">

                                                <span class="la la-lock form-icon"></span>
                                                <input type="password" id="confirmPassword" class="form-control"
                                                       name="confirmPassword" required>
                                                <br>
                                                <span class="error-message" id="confirmPasswordError"></span>
                                            </div>
                                            <br>
                                            <input type="hidden" name="userId" th:value="${userId}">
                                            <!-- Input hidden để giữ thông tin ID -->
                                            <div class="btn-box mt-3">
                                                <input type="submit" value="Change Password"
                                                       class="theme-btn reset-password">
                                            </div>
                                        </div>

                                    </form>
                                </div>
                                <!-- end contact-form-action -->
                            </div>
                            <!-- end form-content -->
                        </div>

                        <!-- end form-box -->
                    </div>
                    <!-- end col-lg-8 -->
                </div>
                <!-- end row -->
            </div>
            <!-- end container -->
        </section>

        <div class="section-block"></div>
    </div>
</main>

<script>
    const form = document.querySelector('form');

    form.addEventListener('submit', (event) => {
        const newPassword = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        const passwordPattern = /^(?=.*[a-zA-Z])(?=.*\d).{6,15}$/;

        // Xóa thông báo lỗi cũ
        document.getElementById('newPasswordError').textContent = '';
        document.getElementById('confirmPasswordError').textContent = '';

        if (!passwordPattern.test(newPassword)) {
            document.getElementById('newPasswordError').textContent = 'Mật khẩu phải có từ 6-15 ký tự và chứa cả chữ và số.';
            event.preventDefault();
        }

        if (newPassword !== confirmPassword) {
            document.getElementById('confirmPasswordError').textContent = 'Mật khẩu xác nhận không khớp.';
            event.preventDefault();
        }
    });
</script>


<!-- Template JS Files -->
<script src="/assets/user/js/reset-pass.js"></script>
<script th:src="@{/assets/component/js/jquery-ui.js}"></script>
<script th:src="@{/assets/component/js/popper.min.js}"></script>
<script th:src="@{/assets/component/js/bootstrap.min.js}"></script>
<script th:src="@{/assets/component/js/bootstrap-select.min.js}"></script>
<script th:src="@{/assets/component/js/moment.min.js}"></script>
<script th:src="@{/assets/component/js/daterangepicker.js}"></script>
<script th:src="@{/assets/component/js/owl.carousel.min.js}"></script>
<script th:src="@{/assets/component/js/jquery.fancybox.min.js}"></script>
<script th:src="@{/assets/component/js/jquery.countTo.min.js}"></script>
<script th:src="@{/assets/component/js/animated-headline.js}"></script>
<script th:src="@{/assets/component/js/jquery.ripples-min.js}"></script>
<script th:src="@{/assets/component/js/quantity-input.js}"></script>
<script th:src="@{/assets/component/js/main.js}"></script>
</body>
